workflows:
  build_ios:
    name: Build iOS without Apple Account
    environment:
      vars:
        NODE_VERSION: 18 # Đặt phiên bản Node.js mong muốn
      node: 18 # Codemagic sẽ tự động sử dụng Node.js 18
      xcode: latest
      cocoapods: default
    scripts:
      - name: Cài đặt dependencies
        script: |
          yarn install
      - name: Cài đặt Pods
        script: |
          cd ios
          pod install
          cd ..
      - name: Build iOS app (Simulator only)
        script: |
          xcodebuild -workspace ios/MyApp.xcworkspace \
          -scheme MyApp \
          -sdk iphonesimulator \
          -configuration Release \
          -derivedDataPath build
    artifacts:
      - build/**/*.app
